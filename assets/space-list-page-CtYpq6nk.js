import{y as L,r as g,c as y,z as _,x as C,A as B,b as e,e as l,S as x,f as w,C as E,q as R,o as A,F as q,h,B as m,i as V,n as k,p as T,g as D,w as F,k as z}from"./index-CowSbynL.js";import{T as W}from"./table-BvClhQCn.js";import{T as j}from"./tag-DYtrA518.js";import{C as M}from"./check-tag-Brb2ymxU.js";import{S as N}from"./select-ABZmvD2f.js";import{d as Q}from"./table-constants-BUD64Kz7.js";import{u as Y}from"./use-swrv-B6eok1CW.js";const $=L(i=>{const r=g(10),t=g([10,20,30,50,100]);return{defaultPerPage:r,pageSizeOptions:t}}),K=y({props:{total:0,page:1,perPage:0,store:null},emits:{"update:page":w,"update:perPage":w}},(i,{emit:r})=>{const t=i.store??$(_("pager-store")),c=g(i.page),d=g(i.perPage||t.defaultPerPage),u=C(()=>Math.ceil(i.total/d.value)),f=s=>{s<1||s>u.value||r("update:page",s)},v=s=>{s!==d.value&&r("update:perPage",s)},n=s=>e("button",{class:`w-8 h-8  ${c.value===s?"bg-primary text-white rounded":"text-[#4C5578] bg-[#fff]"}`,onClick:()=>f(s)},[s]),p=s=>e("button",{class:`w-8 h-8 ${d.value===s?"bg-primary text-white rounded":"text-[#4C5578] bg-[#fff]"}`,onClick:()=>v(s)},[s]),b=C(()=>B([1,c.value-3,c.value-2,c.value-1,c.value,c.value+1,c.value+2,c.value+3,u.value].filter(s=>s>0&&s<=u.value).sort((s,o)=>s-o)).reduce((s,o,a,P)=>P[a+1]!==void 0&&P[a+1]-o>1?s.concat([o,"..."]):s.concat(o),[]));return()=>e("div",{class:"flex justify-between items-center py-4"},[e("div",{class:"flex items-center"},[e("span",{class:"mr-5 text-[#999]"},[l("Rows Per Page")]),t.pageSizeOptions.value.map(s=>p(s))]),e("div",{class:"flex items-center"},[e("button",{class:"px-2 py-1 bg-[#fff]",disabled:c.value===1,onClick:()=>f(1)},[e(x,{name:"first-page",class:"size-4"},null)]),e("button",{class:"px-2 py-1 bg-[#fff]",disabled:c.value===1,onClick:()=>f(c.value-1)},[e(x,{name:"previous-page",class:"size-4"},null)]),b.value.map(s=>typeof s=="number"?n(s):e(x,{name:"more",class:"size-4"},null)),e("button",{class:"px-2 py-1 bg-[#fff]",disabled:c.value===u.value,onClick:()=>f(c.value+1)},[e(x,{name:"next-page",class:"size-4"},null)]),e("button",{class:"px-2 py-1 bg-[#fff]",disabled:c.value===u.value,onClick:()=>f(u.value)},[e(x,{name:"last-page",class:"size-4"},null)])])])}),U=E.object({spaceName:E.string().min(1,{message:"spaceName must be at least 1 characters"}),appDescription:E.string().min(1,{message:"appDescription must be at least 1 characters"}),dataPool:E.string().min(1,{message:"dataPool must be at least 1 characters"}),dimensionRequirement:E.array(E.string()).min(1,{message:"dimensionRequirement must be at least 1 characters"})});function H(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!V(i)}const G=y({inheritAttrs:!1,props:{class:""},emits:{close:w,submit:w}},(i,{emit:r})=>{const t=R({spaceName:"",appDescription:"",dimensionRequirement:[]}),c=g(["xxx","uuu"]),d=R({spaceName:[],appDescription:[],dimensionRequirement:[]}),u=n=>{n.preventDefault(),Object.assign(d,{spaceName:[],appDescription:[],dimensionRequirement:[]}),v()&&(console.log(t),r("submit"))},f=n=>{const p=t.dimensionRequirement.indexOf(n);p===-1?t.dimensionRequirement.push(n):t.dimensionRequirement.splice(p,1),console.log("Updated dimensionRequirement:",t.dimensionRequirement)},v=()=>{const n=U.safeParse(t);return n.success?!0:(n.error.issues.forEach(p=>{const b=p.path[0];d[b].push(p.message)}),console.log("errors",d),!1)};return A(()=>{Object.assign(t,{spaceName:"test",appDescription:`Lorem ipsum dolor sit amet consectetur. Ut gravida egestas mollis
  facilisi pharetra enim mauris praesent. Egestas ut nisl iaculis
  feugiat. Pretium dis commodo est id elementum commodo.
  Consectetur tellus dignissim fringilla dictum sed sed amet in
  facilisis.`,dimensionRequirement:["xxx"]})}),()=>e("div",{class:"p-4"},[e("div",{class:"dialog-header"},[e("h3",{class:"text-sm font-bold text-[#999] absolute left-4 top-4"},[l("NEW")])]),e("div",{class:"flex items-center justify-between mt-4 "},[e(q,{onSubmit:u},{default:()=>{var n,p,b;return[e(h,{error:(n=d.spaceName)==null?void 0:n[0],label:"Space Name",type:"text",withDialog:!0,modelValue:t.spaceName,"onUpdate:modelValue":s=>t.spaceName=s},null),e(h,{error:(p=d.appDescription)==null?void 0:p[0],label:"APP DESCRIPTION",type:"textarea",withDialog:!0,modelValue:t.appDescription,"onUpdate:modelValue":s=>t.appDescription=s},null),e(h,{error:(b=d.dimensionRequirement)==null?void 0:b[0],label:" DIMENSION REQUIREMENT",type:"slot",modelValue:t.dimensionRequirement,"onUpdate:modelValue":s=>t.dimensionRequirement=s,rightComponent:()=>e(m,{level:"text",width:"fit",class:"h-8 text-sm font-bold",onClick:()=>{console.log(111111)}},{default:()=>[l("ADD")],prefix:()=>e(x,{name:"add",class:"w-4 h-4  fill-[#4E5575]"},null)})},{default:()=>[e("x-tag",{class:"flex flex-wrap gap-2"},[c.value.map((s,o)=>e(M,{key:o,class:"text-xs",checked:t.dimensionRequirement.includes(s),onClick:()=>f(s)},H(s)?s:{default:()=>[s]}))])]})]}})]),e("div",{class:"flex justify-end gap-4 h-8 text-sm mt-8   "},[e(m,{width:"fit",type:"submit",class:"px-8 py-2",onClick:()=>r("close")},{default:()=>[l("BACK")]}),e(m,{level:"important",width:"fit",type:"submit",class:"px-8 py-2",onClick:u},{default:()=>[l("SUBMIT")]})])])}),O=y({emits:["close"]},(i,{emit:r})=>{const t=R({password:""}),c=R({password:[""]}),d=()=>{c.password=["Password is required"]};return()=>e(k,null,[e("header",{class:"flex justify-center my-2"},[e(x,{name:"warn",colored:!0,class:"w-10 h-10"},null)]),e("main",{class:"flex justify-center text-center text-sm text-[#666]"},[l("It cannot be restored after deletion. Enter your password to confirm")]),e(q,{onSubmit:d},{default:()=>{var u;return[e(h,{withDialog:!0,error:(u=c.password)==null?void 0:u[0],type:"password",modelValue:t.password,"onUpdate:modelValue":f=>t.password=f,placeholder:"Password"},null),e("div",{class:"flex justify-center gap-4 h-8 text-sm mt-8  "},[e(m,{width:"fit",class:" w-[108px] flex justify-center",onClick:()=>r("close")},{default:()=>[l("Cancel")]}),e(m,{level:"remove",width:"fit",type:"submit",class:" w-[108px] flex justify-center",disabled:!t.password},{default:()=>[l("REMOVE")]})])]}})])}),J=y({inheritAttrs:!1,props:{class:""},emits:{edit:w}},(i,{emit:r})=>{const t=g(),c=g([{text:"REMOVE",onClick:w,level:"danger"}]),d=()=>{r("edit")};return A(()=>{t.value={spaceName:"test",dataPool:"test",model:"test",appDescription:`Lorem ipsum dolor sit amet consectetur. Ut gravida egestas mollis 
  facilisi pharetra enim mauris praesent. Egestas ut nisl iaculis 
  feugiat. Pretium dis commodo est id elementum commodo. 
  Consectetur tellus dignissim fringilla dictum sed sed amet in 
  facilisis.`,dimensionRequirement:["xxx","uuu"],dimensionRequirementOptions:["xxx","uuu"]}}),()=>{var u,f,v;return e("div",{class:"p-4"},[e("div",{class:"dialog-header"},[e("h3",{class:"text-sm font-bold text-[#999] absolute left-4 top-4"},[l("DETAIL")])]),e("div",{class:"flex items-start justify-between pt-6 "},[e("div",null,[e("header",{class:"text-2xl font-bold  text-[#333] "},[l("Space List")]),e("div",{class:"text-[#999] mb-12"},[l("1234567890123")])]),e("div",{class:"flex items-center gap-4 text-sm"},[e(m,{class:"h-8",onClick:d},{default:()=>[l("EDIT")],prefix:()=>e(x,{name:"edit",colored:!0},null)}),e(T,{options:c.value},{default:()=>[l("ww")]})])]),e("div",{class:"flex items-center justify-between gap-20"},[e("div",null,[e("div",{class:"w-2/3 h-px bg-[#D9D9D9] mb-10"},null),e("div",{class:"text-xs text-[#999] font-bold mb-2"},[l("DATA POOL")]),e("div",{class:"text-sm text-[#4E5575] font-bold flex items-center gap-2 mb-6"},[e(x,{name:"data-pool",colored:!0,class:"w-4 h-4"},null),(u=t.value)==null?void 0:u.dataPool]),e("div",{class:"text-xs text-[#999] font-bold mb-2"},[l("MODELS")]),e("div",{class:"text-sm text-[#4E5575] font-bold flex items-center gap-2 mb-6"},[e(x,{name:"model-link",colored:!0,class:"w-4 h-4"},null),(f=t.value)==null?void 0:f.model]),e("div",{class:"w-2/3 h-px bg-[#D9D9D9] my-10"},null),e("div",{class:"text-xs text-[#999] font-bold"},[l("CREATE")]),e("div",{class:"mb-6 text-xs flex items-center gap-2"},[e("span",{class:"text-xs text-[#666] font-bold"},[l("Alex Wang")]),e("span",null,[l("9:07 AM  Apr.14 2024")])]),e("div",{class:"text-xs text-[#999] font-bold"},[l("MODIFY")]),e("div",{class:"text-xs flex items-center gap-2"},[e("span",{class:"  text-[#666] font-bold"},[l("Alex Wang")]),e("span",null,[l("9:07 AM  Apr.14 2024")])])]),e("div",{class:"grow shrink-0  "},[e("div",{class:"text-xs text-[#999] font-bold"},[l("APP DESCRIPTION")]),e("div",{class:"bg-[#F6F6F6] p-2 rounded-lg text-sm text-[#666] my-4 w-[384px] "},[(v=t.value)==null?void 0:v.appDescription]),e("div",{class:"text-xs text-[#999] font-bold mb-4"},[l("DIMENSION REQUIREMENT")]),e("x-tag",{class:"flex gap-2"},[e(j,{class:"text-xs"},{default:()=>[l("Date")]}),e(j,{class:"text-xs"},{default:()=>[l("Theme")]})])])])])}}),X=y({emits:["save","ok"]},(i,{emit:r})=>()=>e(k,null,[e("header",{class:"flex justify-center my-2"},[e(x,{name:"model-link",colored:!0,class:"w-10 h-10"},null)]),e("main",{class:"flex justify-center text-center text-sm text-[#666]"},[l("The current data space contains associated models. Do you need to relabel the models?")]),e("div",{class:"flex justify-end gap-4 h-8 text-sm mt-8  "},[e(m,{width:"fit",type:"submit",class:"!px-2 py-2 w-[108px]  ",onClick:()=>r("save")},{default:()=>[l("SAVE ONLY  ")]}),e(m,{level:"important",width:"fit",type:"submit",class:"px-8 py-2 bg-[#363947]",onClick:()=>r("ok")},{default:()=>[l("OKAY")]})])]));function Z(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!V(i)}const ee=y({inheritAttrs:!1,props:{class:""},emits:{close:w,back:w,save:w}},(i,{emit:r})=>{const t=R({spaceName:"",dataPool:"",model:"",appDescription:"",dimensionRequirement:[]}),c=g([]),d=R({dataPool:[],spaceName:[],model:[],appDescription:[],dimensionRequirement:[]}),u=()=>{const n=U.safeParse(t);return n.success?!0:(n.error.issues.forEach(p=>{const b=p.path[0];d[b].push(p.message)}),console.log("errors",d),!1)},f=n=>{n.preventDefault(),Object.assign(d,{spaceName:[],appDescription:[],dimensionRequirement:[]}),u()&&(console.log(t,999),D({hideHeader:!0,content:()=>e(X,null,null),class:"w-[256px]"}))},v=n=>{const p=t.dimensionRequirement.indexOf(n);p===-1?t.dimensionRequirement.push(n):t.dimensionRequirement.splice(p,1),console.log("Updated dimensionRequirement:",t.dimensionRequirement)};return A(()=>{Object.assign(t,{spaceName:"test",dataPool:"test",model:"test",appDescription:`Lorem ipsum dolor sit amet consectetur. Ut gravida egestas mollis
  facilisi pharetra enim mauris praesent. Egestas ut nisl iaculis
  feugiat. Pretium dis commodo est id elementum commodo.
  Consectetur tellus dignissim fringilla dictum sed sed amet in
  facilisis.`,dimensionRequirement:["xxx"]})}),()=>e("div",{class:"p-4"},[e("div",{class:"dialog-header"},[e("h3",{class:"text-sm font-bold text-[#999] absolute left-4 top-4"},[l("EDIT")])]),e("div",{class:"flex items-start justify-between  pt-12 "},[e("div",null,[e("div",{class:"text-[#999] "},[l("ID")]),e("header",{class:"text-2xl font-bold  text-[#333] "},[l("1234567890123")])])]),e("div",{class:"flex items-center justify-between gap-20"},[e("div",{class:"grow shrink-0"},[e(q,{onSubmit:f,class:"flex flex-col "},{default:()=>{var n,p,b,s,o;return[e("div",{class:"flex gap-8 justify-between"},[e("div",null,[e(h,{error:(n=d.spaceName)==null?void 0:n[0],label:"Space Name",type:"text",withDialog:!0,modelValue:t.spaceName,"onUpdate:modelValue":a=>t.spaceName=a},null),e(h,{error:(p=d.dataPool)==null?void 0:p[0],label:"dataPool",type:"slot",modelValue:t.dataPool,"onUpdate:modelValue":a=>t.dataPool=a},{default:()=>[e(N,{modelValue:t.dataPool,"onUpdate:modelValue":a=>t.dataPool=a,options:[{label:"dataPool1",value:"dataPool1"},{label:"dataPool2",value:"dataPool2"},{label:"dataPool3",value:"dataPool3"}]},null)]}),e(h,{error:(b=d.model)==null?void 0:b[0],label:"Model",type:"slot",modelValue:t.model,"onUpdate:modelValue":a=>t.model=a},{default:()=>[e(N,{modelValue:t.model,"onUpdate:modelValue":a=>t.model=a,options:[{label:"model1",value:"model1"},{label:"model2",value:"model2"},{label:"model3",value:"model3"}]},null)]})]),e("div",{class:"w-px bg-[#D9D9D9] self-stretch mx-4"},null),e("div",{class:"grow shrink-0"},[e(h,{error:(s=d.appDescription)==null?void 0:s[0],label:"APP DESCRIPTION",type:"textarea",withDialog:!0,modelValue:t.appDescription,"onUpdate:modelValue":a=>t.appDescription=a},null),e(h,{error:(o=d.model)==null?void 0:o[0],label:" DIMENSION REQUIREMENT",type:"slot",modelValue:t.model,"onUpdate:modelValue":a=>t.model=a,rightComponent:()=>e(m,{level:"text",width:"fit",class:"h-8 text-sm font-bold",onClick:()=>{console.log(111111)}},{default:()=>[l("ADD")],prefix:()=>e(x,{name:"add",class:"w-4 h-4  fill-[#4E5575]"},null)})},{default:()=>[e("x-tag",{class:"flex flex-wrap gap-2"},[c.value.map((a,P)=>e(M,{key:P,class:"text-xs",checked:t.dimensionRequirement.includes(a),onClick:()=>v(a)},Z(a)?a:{default:()=>[a]}))])]})])]),e("div",{class:"flex justify-end gap-4 h-8 text-sm mt-8   "},[e(m,{width:"fit",class:"px-8 py-2",onClick:()=>r("back")},{default:()=>[l("BACK")]}),e(m,{level:"important",width:"fit",type:"submit",class:"px-8 py-2"},{default:()=>[l("SAVE")]})])]}})])])])}),I=y({inheritAttrs:!1,props:{class:"",isEdit:!1}},i=>{const r=g(i.isEdit);return()=>r.value?e(ee,{onBack:()=>r.value=!1,onSave:()=>r.value=!1},null):e(J,{onEdit:()=>r.value=!0},null)});function te(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!V(i)}const ce=y(null,()=>{const i=C(()=>{var s;return((s=u.value)==null?void 0:s.resource)??[]}),r=g(1);F(()=>r.value,()=>{});const t=g(Q),c=C(()=>{var s;return((s=u.value)==null?void 0:s.pager.total)??0}),d=C(()=>["/api/data-space",r.value,t.value]),{data:u}=Y(d,async(s,o,a)=>(await z.get(s,{page:o,perPage:a})).data),f=g([{prop:"index",header:"NO.",width:"80px"},{prop:"name_id",header:"NAME/ID"},{prop:"app_description",header:"APP DESCRIPTION"},{prop:"dimension_requirements",header:"DIMENSION REQUIREMENTS"},{prop:"data_pool",header:"DATA POOL"},{prop:"models",header:"MODELS"},{prop:"creat",header:"CREAT"},{prop:"modify",header:"MODIFY"},{prop:"actions",header:"ACTIONS",cell:s=>e("div",{class:"flex gap-x-4 items-center"},[e(m,{level:"text",width:"fit",class:"h-8 text-sm font-bold",onClick:()=>{D({content:()=>e(I,null,null),class:"w-[752px]"})}},{default:()=>[l("VIEW")]}),e(T,{buttonText:"···",options:[{text:"EDIT",onClick:()=>{D({content:()=>e(I,{isEdit:!0},null),class:"w-[752px]"})}},{text:"REMOVE",level:"danger",onClick:()=>{const o=D({hideHeader:!0,content:()=>e(O,{onClose:()=>o()},null),class:"w-[256px]"})}}]},null)])}]),v=g(!1),n=g(null),p=C(()=>n.value?n.value.getSelectedRows():{indexList:[],rows:[]}),b=()=>{D({content:()=>e(I,null,null),class:"w-[752px]"})};return()=>{var s;return e("div",{class:"p-8"},[e("header",{class:"text-3xl font-bold mb-8"},[l("Space List")]),e("x-toolbar",{class:"flex justify-between items-center mb-4"},[!v.value&&e("div",{class:"flex gap-x-4 items-center"},[e(N,{class:"!w-64",placeholder:"Space Name",filterable:!0},{prefix:()=>e(x,{name:"search",colored:!0},null)}),e(N,{class:"!w-64",placeholder:"Description",filterable:!0},{prefix:()=>e(x,{name:"description",colored:!0},null)})]),e("x-actions",{class:"w-full"},[v.value?e("div",{class:"flex items-center gap-x-4 justify-between w-full"},[p.value.indexList.length>0?e("div",{class:"flex items-center gap-x-4 justify-end"},[e(m,{width:"fit",class:"h-8 text-sm",onClick:()=>console.log("edit",p.value)},{default:()=>[l("EDIT")]}),e(m,{level:"remove_outline",width:"fit",class:"h-8 text-sm",onClick:()=>{const o=D({content:()=>e(O,{onClose:()=>o()},null),class:"w-[256px]"})}},{default:()=>[l("REMOVE")]})]):e(m,{level:"remove",width:"fit",class:"h-8 text-sm flex   justify-center",onClick:()=>{const o=D({content:()=>e(O,{onClose:()=>o()},null),class:"w-[256px]"})}},{default:()=>[l("REMOVE ALL")]}),e(m,{width:"fit",class:"h-8 text-sm font-bold",onClick:()=>v.value=!1},{default:()=>[l("CANCEL")]})]):e("div",{class:"flex items-center gap-x-4 justify-end"},[e(m,{level:"text",width:"fit",class:"h-8 text-sm font-bold",onClick:()=>v.value=!0},{default:()=>[l("MULTI SELECT")]}),e(m,{level:"important",width:"fit",class:"h-8 text-sm",onClick:()=>{const o=D({content:()=>e(G,{onClose:()=>o()},null),class:"w-[384px]"})}},{default:()=>[l("ADD")],prefix:()=>e(x,{name:"add",colored:!0},null)})])])]),((s=u.value)==null?void 0:s.resource[0])&&e(k,null,[e(W,{ref:n,columns:f.value,dataSource:i.value,total:u.value.pager.total,enableSelect:v.value},{cell:({row:o,column:a})=>{if(a.prop==="dimension_requirements"){const P=o[a.prop];return e("div",{class:"flex flex-wrap gap-2"},[P.map(S=>e(j,{key:S},te(S)?S:{default:()=>[S]}))])}else return a.prop==="name_id"?e(k,null,[e(m,{level:"text",width:"fit",class:" text-sm font-bold",onClick:b},{default:()=>[o[a.prop]]}),l("12345678")]):o[a.prop]}}),c.value>0?e(K,{total:c.value??0,page:r.value,"onUpdate:page":o=>r.value=o,perPager:t.value,"onUpdate:perPager":o=>t.value=o},null):null])])}});export{ce as SpaceListPage,ce as default};
